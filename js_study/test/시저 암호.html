<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Title</title>
  </head>
  <body></body>
  <script>
    //const s = "a B z"; // e f a
    //"ab";  // 1- 26 사이
    //const n = 4;
    solution("P", 15); //: 오류 나는 케이스 E로 리턴되야함
    //solution(s, n);
    function solution(s, n) {
      let num = 0;
      let str = "";
      let answer = "";
      let answerArr = [];
      let arr = s.length > 1 ? s.split("") : s;
      for (let i = 0; i < arr.length; i++) {
        if (arr[i] === " ") {
          str = " ";
        }
        //z,Z 케이스
        else if (arr[i] === "z" || arr[i] === "Z") {
          //let test = arr.indexOf("z") ? arr.indexOf("z") : arr.indexOf("Z");
          let newNum = arr[i].charCodeAt(0);
          let newStr = String.fromCharCode(
            newNum - ("Z".charCodeAt(0) - "A".charCodeAt(0)) + n - 1
          );
          str = newStr;
        } else {
          num = arr[i].charCodeAt(0) + n;
          if (num < "Z".charCodeAt(0) && num < "z".charCodeAt(0)) {
            //제일 큰 수를 기준으로 작은 경우에만 num 정상 출력
            str = String.fromCharCode(num);
          } else {
            if (arr[i] === arr[i].toLowerCase()) {
              //대소문자 구별해서
              str =
                num > "z".charCodeAt(0)
                  ? String.fromCharCode(
                      "a".charCodeAt(0) + (num - "z".charCodeAt(0) - 1)
                    )
                  : String.fromCharCode(num);
            } else {
              str =
                num > "Z".charCodeAt(0)
                  ? String.fromCharCode(
                      "A".charCodeAt(0) + (num - "Z".charCodeAt(0) - 1)
                    )
                  : String.fromCharCode(num);
            }
          }
        }

        answerArr.push(str);
      }
      answer = answerArr.join("");
      return answer;
    }
  </script>
</html>
